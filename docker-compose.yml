version: "3.9"
services:
  proxy-zuul:
    build: 
      context: .
      dockerfile: ./docker/reverseproxy/Dockerfile
    volumes:
      - ./spring-cloud-starter-netflix-zuul/:/proxy:rw
    ports:
      - "8080:8080"

  proxy-webflux:
    build: 
      context: .
      dockerfile: ./docker/reverseproxy/Dockerfile
    volumes:
      - ./spring-cloud-starter-grateway-webflux:/proxy:rw
    ports:
      - "8081:8081"

  proxy-mvc:
    build: 
      context: .
      dockerfile: ./docker/reverseproxy/Dockerfile
    volumes:
      - ./spring-cloud-starter-grateway-mvc:/proxy:rw
    ports:
      - "8082:8082"
  
  grafana:
    container_name: container-grafana
    image: grafana/grafana-oss:latest
    ports:
      - "3000:3000"
    volumes:
      - ./docker/grafana/grafana.ini:/etc/grafana/grafana.ini
      
# Start the application stack defined in docker-compose.yml
# docker-compose up -d

# Stop the application stack
# docker-compose down